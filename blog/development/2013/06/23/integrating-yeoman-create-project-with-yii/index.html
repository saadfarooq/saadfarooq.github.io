<!DOCTYPE html><html><!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Integrating Yeoman based Project with Yii</title><meta name=viewport content="width=device-width"><link rel=stylesheet href="http://fonts.googleapis.com/css?family=Open+Sans:300,400italic,400,600,700|Abril+Fatface"><!-- <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet"> --><link href=//netdna.bootstrapcdn.com/bootswatch/3.0.3/yeti/bootstrap.min.css rel=stylesheet><link href=//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css rel=stylesheet><script src=http://code.jquery.com/jquery-2.0.3.min.js></script><script src=//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js></script><link rel=stylesheet href=/css/f79b.main.css></head><body><div class=row><header class="masthead col-md-4"><div class="inner text-center"><a href=/><img src="http://www.gravatar.com/avatar/da46d3d12af35a4f70339ac6aba7f9c8?s=150" class="center-block img-circle img-responsive"></a><h1>Saad Farooq</h1><p class=lead>I have issues... need pull requests</p><div id=contact-list class=text-center><ul class="list-unstyled list-inline"><li><a class="btn btn-circle btn-sm" href=https://github.com/sfarooq><i class="fa fa-github-alt fa-lg fa-2x fa-inverse"></i></a></li><li><a class="btn btn-circle btn-sm" href=https://twitter.com/unimpeccable><i class="fa fa-twitter fa-lg fa-2x"></i></a></li><li><a class="btn btn-circle btn-sm" href=mailto:sa@dfarooq.com><i class="fa fa-envelope fa-lg fa-2x"></i></a></li></ul><ul id=contact-list-secondary class="list-unstyled list-inline"></ul></div><div class=colophon><!--             <ul class="colophon-links">
                <li>
                    <a href="httdanps://github.com/mdo/hyde/archive/v.zip">Download</a>
                </li>
                <li>
                    <a href="https://github.com/mdo/hyde">GitHub project</a>
                </li>
            </ul> --><p>&copy; 2014. Saad Farooq All rights reserved.</p></div></div></header><div class="content col-md-8 col-md-offset-4"><h2>Integrating Yeoman based Project with Yii</h2><p class=meta>23 Jun 2013</p><div class=post><h2>Options</h2><p>The Yeoman based Angular project builds to HTML and Javascript.</p><p>There are two main options for integrating with Yii.</p><ul><li>Static HTML served directly from a directory</li><li>HTML injected into a Yii PHP view</li></ul><h2>Static HTML</h2><p>The Yeoman project is enclosed in a self enclosed directory named <code>app</code> during development and builds to a <code>dist</code> directory. All required HTML and CSS files are within the same directory. The Angular framework has a level of abstraction implemented via directives called <code>ng-app</code>. Each <code>ng-app</code> contains multiple controllers (via <code>ng-controller</code>) which are data bound with associated <code>Controller</code> functions in Javascript.Routing can be implemented at the <code>ng-app</code> level with URL routes of the <code>#/&lt;route&gt;</code> pattern being assigned to various subviews by the Angular framework.This provides a nice modulization of Javascript actions and DOM manipulation (something which is particularly annoying otherwise) and also allows for bookmarkable URLs. E.g. the view</p><div class=highlight><pre><code class="text language-text" data-lang=text>http://localhost/#/firstview
http://localhost/#/secondview
</code></pre></div><p>can be implemented using different HTML files via the Angular routing mechanism. And be assigned to different <code>ng-controllers</code>.</p><h3>Implementation</h3><p>The implementation in conjunction with Yii turns out to be simple. Copying the <code>app</code> (or <code>dist</code>) folder to the root of the Yii server creates the URL which simply loads the static HTML app. No problems at all. The Yii framework in the default configuration only routes the URL portion beyond the <code>/index.php/</code> to a Yii controller. Following are the two URL patterns.</p><div class=highlight><pre><code class="text language-text" data-lang=text>http://&lt;serverroot&gt;/&lt;angular-app-directory&gt;/
http://&lt;serverroot&gt;/index.php/&lt;controller&gt;/&lt;action&gt;/
</code></pre></div><p>An Angular static HTML in conjuction with Yii simply works using the former URL scheme.</p><h2>As a Yii View</h2><p>Yii views are rendered as PHP files. The parser parses any PHP directives in the view files, but only if there are any (smirks). By copying the contents of the Angular app&#39;s HTML file to a PHP view file, it is simply rendered as HTML. The only problem now is making sure that the script loading tags work as expected.This turns out to be not so simple using just strings. The paths have to be hard-coded because Yii does not allow access to relative paths in sub-directories.Futhermore, the HTML files that make up the modularized views routed by the Angular app via URL routes must also be served as static files.</p><h3>Implementation</h3><p>Currently, the static files are served via hard-coded paths. Once a decision is reached on what pattern of development to follow, the scripts and stylesheets are best served via the Yii assets system. This system takes scripts / stylesheet URLs from a standard directory and serves them via relative paths built during the compile process.</p><h3>Layout Inheritance</h3><p>As of this writing, the Angular app served the Yii view inherits some layout from the default Yii layout whereas some is derived from the HTML app. This results in some disarray in the overall layout. The feed column which is designed to take up about a quarter of the real estate is limited to just enough to hold the placeholder text. Updating the script loading as above and abstracing the common elements to a Yii layout should fix this problem pleasantly based on the decision on what method to use.</p><h3>Trailing Issues</h3><p>The only remaining matter is the serving of the static HTML sub-view files. I&#39;ll need to investigate some more on this. Perhaps Yii offers a way to serve these similar to how scripts are served. In the case where that is not possible, some security review might be undertaken of the situation. It is all just HTML and JS and not data is actually used until the app is running and the server authorizes the data, but you never know.</p></div><hr><div id=disqus_thread></div><script type=text/javascript>var disqus_developer = 1; 
  
  var disqus_shortname = 'saadfarooq'; // required: replace example with your forum shortname
  
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=http://disqus.com class=dsq-brlink>blog comments powered by <span class=logo-disqus>Disqus</span></a></div></div><!-- footer.html --><footer><hr><!-- <p>
 	&copy; 2014 Saad Farooq.
 </p>
 <p>Made with Jekyll</p> --></footer><script src=/js/d41d.scripts.js></script><!-- footer.html end --></body></html></html>